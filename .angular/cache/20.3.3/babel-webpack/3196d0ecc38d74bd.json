{"ast":null,"code":"import _asyncToGenerator from \"D:/todos-task/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { inject } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { TodoApi } from './todo.api';\nimport { TodoStore } from './todo.store';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nfunction TodoDetailPage_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"h2\");\n    i0.ɵɵtext(2, \"Detail\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"form\", 1);\n    i0.ɵɵlistener(\"ngSubmit\", function TodoDetailPage_ng_container_0_Template_form_ngSubmit_3_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.save());\n    });\n    i0.ɵɵelementStart(4, \"input\", 2);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function TodoDetailPage_ng_container_0_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.todo.title, $event) || (ctx_r1.todo.title = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"input\", 3);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function TodoDetailPage_ng_container_0_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.desc, $event) || (ctx_r1.desc = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"label\")(7, \"input\", 4);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function TodoDetailPage_ng_container_0_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.todo.completed, $event) || (ctx_r1.todo.completed = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \" Completed\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 5);\n    i0.ɵɵtext(10, \"Save\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function TodoDetailPage_ng_container_0_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.remove());\n    });\n    i0.ɵɵtext(12, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.todo.title);\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.desc);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.todo.completed);\n  }\n}\nexport let TodoDetailPage = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class TodoDetailPage {\n    constructor() {\n      this.route = inject(ActivatedRoute);\n      this.router = inject(Router);\n      this.api = inject(TodoApi);\n      this.store = inject(TodoStore);\n      this.todo = null;\n      this.desc = null;\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const id = _this.route.snapshot.paramMap.get('id');\n        _this.todo = yield _this.api.get(id).toPromise();\n        _this.desc = _this.todo?.description ?? null;\n      })();\n    }\n    save() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this2.todo) return;\n        _this2.store.updateOne({\n          id: _this2.todo.id,\n          patch: {\n            title: _this2.todo.title,\n            description: _this2.desc ?? undefined\n          }\n        });\n        _this2.router.navigateByUrl('/todos');\n      })();\n    }\n    remove() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this3.todo) return;\n        _this3.store.remove(_this3.todo.id);\n        _this3.router.navigateByUrl('/todos');\n      })();\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function TodoDetailPage_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || TodoDetailPage)();\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: TodoDetailPage,\n      selectors: [[\"app-todo-detail\"]],\n      decls: 1,\n      vars: 1,\n      consts: [[4, \"ngIf\"], [1, \"inline\", 3, \"ngSubmit\"], [\"name\", \"title\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"description\", \"placeholder\", \"Description (optional)\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"checkbox\", \"name\", \"completed\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"submit\"], [3, \"click\"]],\n      template: function TodoDetailPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, TodoDetailPage_ng_container_0_Template, 13, 3, \"ng-container\", 0);\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", ctx.todo);\n        }\n      },\n      dependencies: [CommonModule, i1.NgIf, FormsModule, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.CheckboxControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i2.NgModel, i2.NgForm],\n      encapsulation: 2\n    }));\n  }\n  _staticBlock();\n  return TodoDetailPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}