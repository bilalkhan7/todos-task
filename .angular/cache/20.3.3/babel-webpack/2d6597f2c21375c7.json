{"ast":null,"code":"import _asyncToGenerator from \"D:/todos-task/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { inject } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { firstValueFrom } from 'rxjs';\nimport { TodoApi } from './todo.api';\nimport { TodoStore } from './todo.store';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nfunction TodoDetailPage_Conditional_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n    i0.ɵɵtext(2, \"Edit todo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"form\", 1);\n    i0.ɵɵlistener(\"ngSubmit\", function TodoDetailPage_Conditional_0_Template_form_ngSubmit_3_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.save());\n    });\n    i0.ɵɵelementStart(4, \"input\", 2);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function TodoDetailPage_Conditional_0_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.todo.title, $event) || (ctx_r1.todo.title = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"input\", 3);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function TodoDetailPage_Conditional_0_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.desc, $event) || (ctx_r1.desc = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"label\", 4)(7, \"input\", 5);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function TodoDetailPage_Conditional_0_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.todo.completed, $event) || (ctx_r1.todo.completed = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"span\");\n    i0.ɵɵtext(9, \"Completed\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 6)(11, \"button\", 7);\n    i0.ɵɵtext(12, \"Save\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"span\", 8);\n    i0.ɵɵelementStart(14, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function TodoDetailPage_Conditional_0_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.remove());\n    });\n    i0.ɵɵtext(15, \"Delete\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.todo.title);\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.desc);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.todo.completed);\n  }\n}\nexport let TodoDetailPage = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class TodoDetailPage {\n    constructor() {\n      this.route = inject(ActivatedRoute);\n      this.router = inject(Router);\n      this.api = inject(TodoApi);\n      this.store = inject(TodoStore);\n      this.todo = null;\n      this.desc = null;\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const id = _this.route.snapshot.paramMap.get('id');\n        _this.todo = (yield firstValueFrom(_this.api.get(id))) ?? null;\n        _this.desc = _this.todo?.description ?? null;\n      })();\n    }\n    save() {\n      if (!this.todo) return;\n      this.store.update({\n        id: this.todo.id,\n        dto: {\n          title: this.todo.title,\n          description: this.desc ?? undefined,\n          completed: this.todo.completed\n        }\n      });\n      this.router.navigateByUrl('/todos');\n    }\n    remove() {\n      if (!this.todo) return;\n      this.store.remove(this.todo.id);\n      this.router.navigateByUrl('/todos');\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function TodoDetailPage_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || TodoDetailPage)();\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: TodoDetailPage,\n      selectors: [[\"app-todo-detail\"]],\n      decls: 1,\n      vars: 1,\n      consts: [[1, \"card\"], [1, \"stack\", 3, \"ngSubmit\"], [\"name\", \"title\", \"required\", \"\", \"placeholder\", \"Title\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"description\", \"placeholder\", \"Description (optional)\", 1, \"input\", 3, \"ngModelChange\", \"ngModel\"], [1, \"checkbox\"], [\"type\", \"checkbox\", \"name\", \"completed\", 3, \"ngModelChange\", \"ngModel\"], [1, \"row\"], [\"type\", \"submit\", 1, \"btn\"], [1, \"spacer\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", 3, \"click\"]],\n      template: function TodoDetailPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵconditionalCreate(0, TodoDetailPage_Conditional_0_Template, 16, 3, \"div\", 0);\n        }\n        if (rf & 2) {\n          i0.ɵɵconditional(ctx.todo ? 0 : -1);\n        }\n      },\n      dependencies: [CommonModule, FormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.CheckboxControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.NgModel, i1.NgForm],\n      styles: [\".stack[_ngcontent-%COMP%]{display:grid;gap:12px}.row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.muted[_ngcontent-%COMP%]{color:var(--muted)}\"]\n    }));\n  }\n  _staticBlock();\n  return TodoDetailPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}